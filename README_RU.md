# Добро пожаловать в модуль **Система Гильдий** от [Moloko](https://github.com/levrules/mod-guild-system).
Этот модуль создан для улучшения взаимодействия и наград для гильдий на вашем сервере, включая настраиваемые настройки, скорости начисления опыта и уведомления.

- Я новечок в развитии модулей для АзеротКора поэтому строго не судите. Если есть моменты где я ошибся, пожалуйста, поправьте меня чтобы впредь не делал подобные ошибки. 
- Если столкнулись с проблемой или ошибкой, просьба отписаться в дискорде или создайте обсуждение в гитхабе.
- Спасибо большое что используете данного модуля и за фидбеки.

---

## Обзор

### **mod-guild-system**
Основная цель данного модуля — адаптация системы прокачки гильдий, впервые представленной в дополнении Cataclysm, для работы исключительно с дополнением Wrath of the Lich King (WoTLK). Адаптация специально разработана для серверов, использующих фреймворк AzerothCore.

---

## Возможности

- Настраиваемые параметры для включения/отключения функций.
- Режим отладки для тестирования и проверки функционала.
- Начисление опыта за разные виды активности (PvP, убийство боссов, выполнение заданий).
- Еженедельный лимит на количество опыта для баланса прокачки гильдий.


### Functions

```
GuildSystemBaseXP == 250 xp
```

#### 1. Опыт гильдии за выполнение заданий

Рассчитывает опыт, присуждаемый гильдии за выполнение заданий:

- **Base XP**: Выведено с использованием формулы:
  ```
  baseXP = GuildSystemRateXPQuest * GuildSystemBaseXP;
  ```
- **Разница уровней**: регулирует опыт на основе разницы в уровнях между игроком и квестом:
  - Уменьшается вдвое, если уровень игрока значительно выше (`levelDifference > 5`).
  - Удваивается, если квест значительно сложнее (`levelDifference < -5`).
- **Множитель**: масштабирует общий опыт, используя глобальный множитель. `GuildSystemRateXP`.
- **Отладка**: регистрирует детали расчетов, когда `GuildSystemDebug` включена.

#### 2. Опыт гильдии за убийство босса существом

Рассчитывает опыт за победу над существами, включая боссов:

- **Базовый опыт**: определяется как:
  ```
  baseXP = GuildSystemRateXPKillBoss * GuildSystemBaseXP;
  ```
- **Проверка на босса**: определяет, является ли существо боссом, используя:
  ```
  isBoss = creature->GetCreatureTemplate()->type_flags & CREATURE_TYPE_FLAG_BOSS_MOB;
  ```
- **Разница в уровнях**: регулируется в зависимости от разницы в уровнях:
- Уменьшается вдвое, если игрок значительно выше уровня.
- Удваивается, если существо намного сложнее.
- **Множитель**: применяет глобальный множитель опыта `GuildSystemRateXP`.
- **Отладка**: регистрирует сведения о существах, расчет опыта и статус босса, если включена отладка.

#### 3. Опыт гильдии от PvP

Рассчитывает опыт от активности PvP:

- **Базовый опыт**: определяется с использованием:
  ```
  baseXP = GuildSystemRateXPPvP * GuildSystemBaseXP;
  ```
- **Множитель**: Масштабирует общий опыт, используя `GuildSystemRateXP`.
- **Контекстное ведение журнала**:
- Для полей сражений регистрирует их название.
- Для арен регистрирует общую информацию.
- **Отладка**: записывает подробные журналы опыта на основе типа PvP, когда `GuildSystemDebug` включен.

---

## Настройка

Доступные параметры конфигурации модуля можно задать в файле **[worldserver]**:

### **Настройки**

- **GuildSystem.Enable**
  - Включает или отключает систему гильдий.
  - Опции: `0` (отключено) или `1` (включено).
  - По умолчанию: `1` (включено).

- **GuildSystem.Debug**
  - Включает режим отладки для отображения дополнительной информации в консоли.
  - Опции: `0` (отключено) или `1` (включено).
  - По умолчанию: `0` (отключено).

- **GuildSystem.Announce**
  - Включает уведомления о начислении опыта за определённые действия.
  - Опции: `0` (отключено) или `1` (включено).
  - По умолчанию: `1` (включено).

### **Настройки Скоростей**

- **GuildSystem.RateXP**
  - Базовый множитель скорости получения опыта за активность гильдии.
  - Опции: `1+` (положительные целые числа).
  - По умолчанию: `1`.

- **GuildSystem.RateXP.KillBoss**
  - Множитель опыта за убийство боссов.
  - Опции: `1+` (положительные целые числа).
  - По умолчанию: `1`.

- **GuildSystem.RateXP.Quest**
  - Множитель опыта за выполнение заданий.
  - Опции: `1+` (положительные целые числа).
  - По умолчанию: `1`.

- **GuildSystem.RateXP.PvP**
  - Множитель опыта за PvP активность.
  - Опции: `1+` (положительные целые числа).
  - По умолчанию: `3`.

### **Еженедельный Лимит Опыта**

- **GuildSystem.WeeklyXP.Enable**
  - Включает или отключает еженедельный лимит опыта.
  - Опции: `0` (отключено) или `1` (включено).
  - По умолчанию: `1` (включено).

- **GuildSystem.WeeklyXP**
  - Устанавливает максимальное количество опыта, которое гильдия может заработать за неделю.
  - Опции: `1+` (положительные целые числа).
  - По умолчанию: `10000000`.

- **GuildSystem.WeeklyXP.Hours**
  - Час дня (в 24-часовом формате), в который обнуляется лимит еженедельного опыта.
  - Опции: `0-23` (целые числа).
  - По умолчанию: `6`.

- **GuildSystem.WeeklyXP.Minute**
  - Минута часа, в которую обнуляется лимит еженедельного опыта.
  - Опции: `0-59` (целые числа).
  - По умолчанию: `0`.

---

## Установка

1. Клонируйте данный репозиторий:
   ```bash
   cd path/to/azerothcore/modules
   git clone https://github.com/levrules/mod-guild-system.git
   ```
2. Скопируйте файл конфигурации в папку настроек вашего сервера.
3. Измените настройки в конфигурации при необходимости.
4. Перезапустите сервер, чтобы применить изменения.

---

## Поддержка

Если вы столкнулись с проблемами или у вас есть предложения по улучшению, создайте запрос в разделе [Issues](https://github.com/levrules/mod-guild-system) данного репозитория.

---

## Лицензия

Проект лицензирован в соответствии с GNU Affero General Public License (AGPL-3.0). Подробнее можно узнать в файле [LICENSE](LICENSE).
